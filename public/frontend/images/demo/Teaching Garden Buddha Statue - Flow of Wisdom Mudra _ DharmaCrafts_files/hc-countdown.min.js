"use strict";class HC_CD{constructor(t){this.hp_cd=t.hp_cd_html,this.hp_cd_display_on=t.hp_cd_display_on,this.hp_cd_call_to_action=t.hp_cd_call_to_action,this.hp_cd_link=t.hp_cd_link,this.hp_cd_position=t.hp_cd_position,this.hp_cd_sticky=t.hp_cd_sticky,this.p_cd=t.p_cd_html,this.pp_selector=t.pp_selector||"form[action*='/cart/add'] button[type='submit']",this.pp_position=t.pp_position,this.pp_use_campaign_dates=t.pp_use_campaign_dates,this.pp_valid_till=t.pp_valid_till}insertAfter(t,e){e.parentNode.insertBefore(t,e.nextSibling)}add_cd_above(t){const e=document.querySelector(this.pp_selector);e&&e.parentNode.insertBefore(t,e)}add_cd_below(t){const e=document.querySelector(this.pp_selector);e&&this.insertAfter(t,e)}init_hp_cd(){const t=(new DOMParser).parseFromString(this.hp_cd,"text/html");if(this.hp_cd_el=t.body.firstElementChild,2===this.hp_cd_call_to_action&&""!=this.hp_cd_link&&(this.hp_cd_el.onclick=()=>{window.location.href=this.hp_cd_link}),document.body.prepend(this.hp_cd_el),0==this.hp_cd_position&&1==this.hp_cd_sticky){const t=this.hp_cd_el.getBoundingClientRect().height;document.body.style.marginTop=t+"px"}this.init_countdown(this.hp_cd_el,this.hp_cd_el.dataset.deadline);const e=new CustomEvent("hc.hpCountdownLoaded",{detail:{countdown:this.hp_cd_el},bubbles:!0,cancelable:!0,composed:!1});document.dispatchEvent(e)}init_p_cd(){let t;if(this.pp_use_campaign_dates){const e=document.getElementById("hc_product_countdown_dates");if(void 0!==e){const c=JSON.parse(e.textContent),d=e.dataset.p_id;try{t=c[d].sale_end}catch(t){console.log("no end date for product")}}}else void 0!==this.pp_valid_till&&(t=this.pp_valid_till);if(null!=t&&""!=t){const e=(new DOMParser).parseFromString(this.p_cd,"text/html");this.p_cd_el=e.body.firstElementChild,0==this.pp_position?this.add_cd_above(this.p_cd_el):this.add_cd_below(this.p_cd_el),this.init_countdown(this.p_cd_el,t);const c=new CustomEvent("hc.pCountdownLoaded",{detail:{countdown:this.p_cd_el},bubbles:!0,cancelable:!0,composed:!1});document.dispatchEvent(c)}}init_countdown(t,e){let c=!1;"1"==t.dataset.flip&&(c=!0);const d=e.split(/[^0-9]/).map((t=>parseInt(t,10))),i=new Date(Date.UTC(d[0],d[1]-1,d[2],d[3],d[4],d[5],d[6],d[7])),o=t.querySelector(".hc_cd_days"),a=t.querySelector(".hc_cd_hours"),s=t.querySelector(".hc_cd_minutes"),_=t.querySelector(".hc_cd_seconds");if(c)var n="00",r=_.querySelector(".card__top"),l=_.querySelector(".card__bottom"),p=_.querySelector(".card__back"),h=_.querySelector(".card__back .card__bottom"),u="00",m=s.querySelector(".card__top"),y=s.querySelector(".card__bottom"),b=s.querySelector(".card__back"),f=s.querySelector(".card__back .card__bottom"),w="00",v=a.querySelector(".card__top"),S=a.querySelector(".card__bottom"),k=a.querySelector(".card__back"),q=a.querySelector(".card__back .card__bottom"),C="00",g=o.querySelector(".card__top"),x=o.querySelector(".card__bottom"),L=o.querySelector(".card__back"),N=o.querySelector(".card__back .card__bottom");!function e(){let[d,M,T,E,D]=function(){let t=new Date;const e=i-t;return[e,Math.floor(e/864e5),Math.floor(e%864e5/36e5),Math.floor(e%36e5/6e4),Math.floor(e%6e4/1e3)]}();if((void 0===d||d<0)&&(M=0,T=0,E=0,D=0),c){var O=("0"+D).slice(-2);n!==O&&(parseInt(n)>=0&&(p.dataset.value=n,l.dataset.value=n),n=O,r.textContent=n,h.dataset.value=n,_.parentNode.classList.remove("flip"),_.parentNode.offsetWidth,_.parentNode.classList.add("flip"));var H=("0"+E).slice(-2);u!==H&&(parseInt(u)>=0&&(b.dataset.value=u,y.dataset.value=u),u=H,m.textContent=u,f.dataset.value=u,s.parentNode.classList.remove("flip"),s.parentNode.offsetWidth,s.parentNode.classList.add("flip"));var I=("0"+T).slice(-2);w!==I&&(parseInt(w)>=0&&(k.dataset.value=w,S.dataset.value=w),w=I,v.textContent=w,q.dataset.value=w,a.parentNode.classList.remove("flip"),a.parentNode.offsetWidth,a.parentNode.classList.add("flip"));var A=M.toString();if(C!==A){if(3==A.length&&c){const t=document.head,e=".hc_cd-timer.timer_3 .hc_cd_days .card__top,.hc_cd-timer.timer_3 .hc_cd_days .card__bottom,.hc_cd-timer.timer_3 .hc_cd_days .card__back::before,.hc_cd-timer.timer_3 .hc_cd_days .card__back::after {width: 2.2em;}";let c=document.createElement("style");c.setAttribute("type","text/css"),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e)),t.appendChild(c)}parseInt(C)>=0&&(L.dataset.value=C,x.dataset.value=C),C=A,g.textContent=C,N.dataset.value=C,o.parentNode.classList.remove("flip"),o.parentNode.offsetWidth,o.parentNode.classList.add("flip")}}else o.innerHTML=M.toString(),a.innerHTML=("0"+T).slice(-2),s.innerHTML=("0"+E).slice(-2),_.innerHTML=("0"+D).slice(-2);if(void 0===d||d<0){switch(t.dataset.endAction){case"0":t.style.display="none",t.classList.contains("at_top")&&t.classList.contains("hc_cd_sticky")&&(document.body.style.marginTop="0px");break;case"1":t.querySelector(".hc_cd_subheading").style.display="none",t.querySelector(".hc_cd_heading").textContent=t.dataset.endText}}else setTimeout(e,1e3)}()}init(){if(""!=this.hp_cd)switch(this.hp_cd_display_on){case 0:this.init_hp_cd();break;case 1:"/"===window.location.pathname&&this.init_hp_cd();break;case 2:"/"!==window.location.pathname&&this.init_hp_cd();break;case 3:-1===window.location.pathname.indexOf("/products/")&&this.init_hp_cd();break;case 4:"/"!=window.location.pathname&&-1===window.location.pathname.indexOf("/products/")&&this.init_hp_cd()}""!=this.p_cd&&-1!==window.location.pathname.indexOf("/products/")&&this.init_p_cd()}}window.addEventListener("DOMContentLoaded",(t=>{new HC_CD(hcCountdownSettings).init()}));