{"version":3,"file":"/frontend/bundle/js/checkout/index.min.js","mappings":"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","sources":["webpack:///./resources/src/frontend/js/checkout/index.js"],"sourcesContent":["// ==== VALIDATION ==== //\n$(() => {\n    $('[data-form=\"checkout\"]').validate({\n        rules: {\n            fullname: {\n                required: true,\n                minlength: 2,\n                maxlength: 255,\n            },\n            address_line: {\n                required: true,\n                minlength: 2,\n                maxlength: 255,\n            },\n            city_name: {\n                required: true,\n                minlength: 2,\n                maxlength: 255,\n            },\n            phone: {\n                required: true,\n                minlength: 8,\n                maxlength: 13,\n                validate_phone: true\n            }\n        },\n        messages: {\n            fullname: {\n                required: 'Vui lòng nhập họ và tên',\n                maxlength: 'Không lớn hơn 255 ký tự',\n                minlength: 'Tên bạn quá ngắn'\n            },\n            address_line: {\n                required: 'Vui lòng nhập địa chỉ nhận',\n                maxlength: 'Không lớn hơn 255 ký tự',\n                minlength: 'Địa chỉ nhận bạn quá ngắn'\n            },\n            city_name: {\n                required: 'Vui lòng nhập thành phố',\n                maxlength: 'Không lớn hơn 255 ký tự',\n                minlength: 'Tên Thành phố quá ngắn'\n            },\n            phone: {\n                required: 'Vui lòng nhập số điện thoại',\n                maxlength: 'Không lớn hơn 13 ký tự',\n                minlength: 'Số điện thoại quá ngắn',\n                validate_phone: \"Số điện thoại không hợp lệ\"\n            }\n        },\n        submitHandler: function(form) {\n            handleOrder(form);\n        }\n    });\n\n    function handleOrder(form) {\n        const formData = $(form).serialize();\n        const route = $(form).attr('action');\n        const $self = $(form);\n\n        $.ajax({\n            url: route,\n            method: 'POST',\n            data: formData,\n            beforeSend: () => {\n                $self.find('button[type=\"submit\"]').prop('disabled', true);\n                $self.find('[data-button-btn-process-order-text]').text('Đang xử lý...');\n            },\n            success: (response) => {\n                const { paying_confirmed, end_of_redirect_at } = response;\n\n                if (paying_confirmed) {\n                    window.location.href = end_of_redirect_at?.success;\n                }\n            },\n            error: () => {\n                $self.find('button[type=\"submit\"]').prop('disabled', false);\n                $self.find('[data-button-btn-process-order-text]').text('Đặt hàng');\n            },\n        });\n    }\n});\n\n// ==== CHECKOUT LOGIC ==== //\n$(() => {\n    $(document).ready(function() {\n        $('[name=\"shipping_rate_id\"]').trigger('change');\n        $('[name=\"payment_option_id\"]').trigger('change');\n    })\n\n    $('[name=\"shipping_rate_id\"]').on('change', function() {\n        calculateTransportFee();\n        calculateTotalPayment();\n    });\n\n    $('[name=\"payment_option_id\"]').on('change', function() {\n        calculateTransportFee();\n        calculateTotalPayment();\n    });\n\n    $('[data-form=\"checkout\"]').on('submit', function(e) {\n        e.preventDefault();\n    });\n\n    function calculateTransportFee() {\n        const shippingRate = $('[name=\"shipping_rate_id\"]:checked').attr('data-rate');\n\n        $('[data-value-transport-fee]').text(utils_helper.formatPrice(shippingRate));\n    }\n\n    function calculateTotalPayment() {\n        const totalPriceHasShipping = $('[name=\"shipping_rate_id\"]:checked').attr('data-total-price-has-shipping');\n\n        $('[data-value-total-payment]').text(utils_helper.formatPrice(totalPriceHasShipping));\n    }\n});\n"],"names":["$","validate","rules","fullname","required","minlength","maxlength","address_line","city_name","phone","validate_phone","messages","submitHandler","form","handleOrder","formData","serialize","route","attr","$self","ajax","url","method","data","beforeSend","find","prop","text","success","response","paying_confirmed","end_of_redirect_at","window","location","href","error","document","ready","trigger","on","calculateTransportFee","calculateTotalPayment","e","preventDefault","shippingRate","utils_helper","formatPrice","totalPriceHasShipping"],"sourceRoot":""}