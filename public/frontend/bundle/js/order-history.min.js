/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!****************************************************!*\
  !*** ./resources/src/frontend/js/order-history.js ***!
  \****************************************************/
$(document).ready(function () {
  $('#modal-cancel-order').find('[data-overlay-close]').on('click', function () {
    $('#modal-cancel-order').removeAttr('open');
  });
  $('#btn-cancel-order').on('click', function () {
    $('#modal-cancel-order').attr('open', true);
  });
  $('#cancel_order_form').find('[name="reason"]').on('change', function () {
    handleCancelOrder();
  });
  $('#cancel_order_form').find('[name="content"]').on('input', function () {
    handleCancelOrder();
  });
  function handleCancelOrder() {
    var reason = $('#cancel_order_form').find('[name="reason"]').val();
    var content = $('#cancel_order_form').find('[name="content"]').val();
    var isValid = !!reason.trim().length && !!content.trim().length;
    $('#cancel_order_form').find('[type="submit"]').prop('disabled', !isValid);
  }
  $('#cancel_order_form').on('submit', function (e) {
    e.preventDefault();
    var reason = $('#cancel_order_form').find('[name="reason"]').val();
    var content = $('#cancel_order_form').find('[name="content"]').val();
    var _self = $(this);
    $.ajax({
      url: _self.attr('action'),
      method: 'POST',
      data: {
        reason: reason,
        content: content
      },
      beforeSend: function beforeSend() {
        _self.find('[type="submit"]').prop('disabled', true);
      },
      success: function success() {
        toastr.success('Huỷ đơn hàng thành công.');
        _self.find('[type="submit"]').prop('disabled', false);
        setTimeout(function () {
          window.location.reload();
        }, 500);
      },
      error: function error() {
        _self.find('[type="submit"]').prop('disabled', false);
        toastr.error('Huỷ đơn hàng không thành công.');
      }
    });
  });
});
/******/ })()
;